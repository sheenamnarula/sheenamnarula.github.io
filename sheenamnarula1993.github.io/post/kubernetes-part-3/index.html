<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.2.5">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Sheenam Narula">

  
  
  
    
  
  <meta name="description" content="In this post, we will understand the different parts of configuration file of kubernetes by deploying a node application. For this post, you can find github code at :
https://github.com/sheenamnarula/Node-mongo-kubernetes Refer this repository that contains dockerised node application code and configuration files for kubernetes deployment for better understanding.
Second Option : Create a node app and dockerise it. For dockerisation of node app, you can follow below post :
 http://sheenamnarula93.">

  
  <link rel="alternate" hreflang="en-us" href="http://sheenamnarula1993.github.io/post/kubernetes-part-3/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="hsl(339, 90%, 68%)">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" disabled>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark">
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  
    
    
    
    
      
    
    
    
    <link rel="stylesheet" href="/css/academic.d343353a722af4a7fe37c7930aa2f406.css">
  

  
  
  

  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="http://sheenamnarula1993.github.io/post/kubernetes-part-3/">

  
  
  
  
    
    
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Sheenam Narula">
  <meta property="og:url" content="http://sheenamnarula1993.github.io/post/kubernetes-part-3/">
  <meta property="og:title" content="Kubernetes Configuration file | Sheenam Narula">
  <meta property="og:description" content="In this post, we will understand the different parts of configuration file of kubernetes by deploying a node application. For this post, you can find github code at :
https://github.com/sheenamnarula/Node-mongo-kubernetes Refer this repository that contains dockerised node application code and configuration files for kubernetes deployment for better understanding.
Second Option : Create a node app and dockerise it. For dockerisation of node app, you can follow below post :
 http://sheenamnarula93."><meta property="og:image" content="http://sheenamnarula1993.github.io/img/icon-192.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2020-10-16T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2020-10-16T00:00:00&#43;00:00">
  

  

  

  <title>Kubernetes Configuration file | Sheenam Narula</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" class="dark">
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Sheenam Narula</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">Kubernetes Configuration file</h1>

  
  <p class="page-subtitle">Deployment of Node App to kubernetes</p>
  

  
    



<meta content="2020-10-16 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2020-10-16 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Oct 16, 2020</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    4 min read
  </span>
  

  
  

  

  
    

  

</div>

    
















  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      <h3 id="in-this-post-we-will-understand-the-different-parts-of-configuration-file-of-kubernetes-by-deploying-a-node-application">In this post, we will understand the different parts of configuration file of kubernetes by deploying a node application.</h3>
<p>For this post, you can find github code at :</p>
<pre><code>https://github.com/sheenamnarula/Node-mongo-kubernetes
</code></pre><p>Refer this repository that contains dockerised node application code  and configuration files for kubernetes deployment for better understanding.</p>
<h3 id="second-option-">Second Option :</h3>
<p>Create a node app and dockerise it. For dockerisation of node app, you can follow below post :</p>
<pre><code> http://sheenamnarula93.com/post/express-docker-aws-1/

</code></pre><h2 id="kubernetes-configuration-file-">Kubernetes Configuration File :</h2>
<p>Folder Location for files in cloned repository : k8s</p>
<pre><code> Node app file : k8s/node-app.yaml

 Mongo file : k8s/mongodb.yaml
</code></pre><h2 id="explanation-of-files-">Explanation of files :</h2>
<pre><code>apiVersion : apps/v1
</code></pre><ul>
<li>This line describes the Kubernetes API versions to be used to create the resource.</li>
</ul>
<pre><code>kind : Deployment
</code></pre><ul>
<li>This line describes the type of resource to be created.</li>
</ul>
<pre><code>metadata : 
 labels : 
   app : node-app
 name : node-app

</code></pre><h3 id="metadata-">Metadata :</h3>
<ul>
<li>attaches meta-information regarding the resource such as its name or labels.</li>
</ul>
<pre><code>spec:
  replicas : 1
  selector :
    matchLabels : 
      app : node-app-pod
  template : 
    metadata : 
      labels : 
        app : node-app-pod
    spec :
      containers : 
      - name: node-application
        env :
        - name : DB_URI
          value : mongodb://mongodb-service:27017/node-application
        image : sheenam1993/node-application
        ports : 
        - containerPort: 3007
      restartPolicy: Always

</code></pre><h3 id="spec">Spec</h3>
<ul>
<li>describes the specifications of resources</li>
</ul>
<p>The deployment resources are used to manage and control the life cycle of applications Pods.
As a result,the spec section for the deployment resource is containing information about the applications Pod and how to control them, below is a brief description of the basic sections that are required for Deployment Spec:</p>
<ul>
<li>
<h3 id="replicas">Replicas:</h3>
</li>
</ul>
<p>an integer that specifies how many pods the deployment should create.</p>
<ul>
<li>
<h3 id="selectors">Selectors:</h3>
</li>
</ul>
<p>this configuration section specifies the conditions used to select the Pods managed by Deployment. For instance, in the example that we are going to use, Pods that have the label app: mongodb-pod will be managed by the Deployment resource.</p>
<h3 id="template-">Template :</h3>
<p>this section contains the configurations of the Pods.</p>
<p>The Template section contains the following subsections:</p>
<ul>
<li>
<h3 id="metadata">Metadata</h3>
</li>
</ul>
<p>The information that will be attached to every Pod created by our Deployment. The labels defined in this section must match the ones used in the selector sections so that the deployment can manage the Pods after their creation.</p>
<ul>
<li>
<h3 id="spec-1">Spec</h3>
</li>
</ul>
<p>The specifications of the Pod containers (notice that containers sections is a list and can include more than one container definition). Here we can define specific container configurations such as the image name, the attached volumes, restart policy and used ports.</p>
<h2 id="service-in-kubernetes">Service in Kubernetes</h2>
<pre><code>apiVersion: v1
kind: Service
metadata:
  labels:
    app: node-app-pod
  name: node-app-service
spec:
  ports:
  - port: 8080
    targetPort: 3007
    nodePort: 30007
  selector:
    app: node-app-pod
  type: NodePort

</code></pre><p>A service makes pods available for interaction to other application pods in the cluster.</p>
<p>Explanation of Service Code :</p>
<pre><code>kind: Service
</code></pre><p>Kind describes the type of resource to be created. So while creating service, its value is &ldquo;Service&rdquo;</p>
<pre><code>metadata:
  labels:
    app: node-app-pod
  name: node-app-service
</code></pre><p>Metadata describes the information about the service. Here we have given two thing under meta data : labels and name.</p>
<p>A service can be called by another service in cluster by name.</p>
<pre><code>spec:
  ports:
  - port: 8080
    targetPort: 3007
    nodePort: 30007
  selector:
    app: node-app-pod
  type: NodePort
</code></pre><p>Spec describes specifications of servoice. Here is description of spec code :</p>
<ul>
<li>
<h3 id="ports">ports</h3>
</li>
</ul>
<p>ports contain 3 parts further :
port : exposed port of service (for other services)</p>
<ul>
<li>
<h3 id="targetport">targetPort</h3>
</li>
</ul>
<p>exposed port of a pod (means on which our app is running)</p>
<ul>
<li>
<h3 id="nodeport">nodePort</h3>
</li>
</ul>
<p>exposed port to access service from outside the cluster (means if we have to expose the service to end user to run, we have to use nodePort)</p>
<ul>
<li>
<h3 id="selector">selector</h3>
</li>
</ul>
<p>the conditions used to select Pods managed by the service resource.</p>
<ul>
<li>
<h3 id="type-">type :</h3>
</li>
</ul>
<p>Kubernetes supports a couple of service types for managing internal and external traffic. Since MongoDB should not be accessed by any external entity, we will create a ClusterIP service that will expose the service on a cluster-internal IP (only accessible by Pods in the same cluster).But for Node app we have created NodePort service type which can be accessed from outside the cluster as well.</p>

    </div>

    


    
      






  







<div class="media author-card" itemscope itemtype="http://schema.org/Person">
  
  
  <img class="portrait mr-3" src="/author/admin/avatar_hue2b8f8f696eee3ccf5584f279cb1e08d_133025_250x250_fill_q90_lanczos_center.jpg" itemprop="image" alt="Avatar">
  

  <div class="media-body">
    <h5 class="card-title" itemprop="name"><a href="/authors/admin">Sheenam Narula</a></h5>
    <h6 class="card-subtitle">Backend Developer</h6>
    <p class="card-text" itemprop="description">My interests are doing things which i find interesting at particular moment.</p>
    <ul class="network-icon" aria-hidden="true">
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="/#contact" >
          <i class="fas fa-envelope"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://github.com/sheenamnarula" target="_blank" rel="noopener">
          <i class="fab fa-github"></i>
        </a>
      </li>
      
    </ul>
  </div>
</div>



      
      
    

    

    


  </div>
</article>

<div class="container">
  <footer class="site-footer">
  

  <p class="powered-by">
    

    
      
    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

</div>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
      

      
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.f579f291d0f0c7da58aa872f9aba5215.js"></script>

  </body>
</html>

